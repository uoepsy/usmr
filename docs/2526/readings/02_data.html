<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>2: More R - Basic Data Skills – Linear Models</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-f8ebb0a5b2a4f30177e97a0f46afdb45.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/live-runtime/live-runtime.js" type="module"></script>
<link href="site_libs/quarto-contrib/live-runtime/live-runtime.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script>

function toggle_visibility(id1, id2) {

var e = document.getElementById(id1);

var f = document.getElementById(id2);

e.style.display = ((e.style.display!='none') ? 'none' : 'block');

if(f.classList.contains('jk-circle-right')) {

    f.classList.add('jk-circle-down')

    f.classList.remove('jk-circle-right')

} else {

    f.classList.add('jk-circle-right')

    f.classList.remove('jk-circle-down')

}

}

</script>



<!---<script src="https://kit.fontawesome.com/120b08a6f5.js" crossorigin="anonymous"></script>-->

<script type="module" src="site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<link href="site_libs/panelset-0.3.0/panelset.css" rel="stylesheet">

<script src="site_libs/panelset-0.3.0/panelset.js"></script>

<link rel="stylesheet" href="https://uoepsy.github.io/assets/css/ccfooter.css">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./02_data.html">2: More R - Basic Data Skills</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Linear Models</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1: A first look at R &amp; RStudio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">2: More R - Basic Data Skills</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_measurement.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3: Measurement &amp; Distributions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_sampling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4: Curves &amp; Sampling</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_inference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5: Foundations of Inference</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_inference2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">6: Practical Inference</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#vectors" id="toc-vectors" class="nav-link active" data-scroll-target="#vectors">Vectors</a></li>
  <li><a href="#dataframes" id="toc-dataframes" class="nav-link" data-scroll-target="#dataframes">Dataframes</a></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions">Functions</a></li>
  <li><a href="#r-packages" id="toc-r-packages" class="nav-link" data-scroll-target="#r-packages">R Packages</a></li>
  <li><a href="#checkpoint---where-are-you-writing-your-code" id="toc-checkpoint---where-are-you-writing-your-code" class="nav-link" data-scroll-target="#checkpoint---where-are-you-writing-your-code">Checkpoint - where are you writing your code?</a></li>
  <li><a href="#basic-data-wrangling" id="toc-basic-data-wrangling" class="nav-link" data-scroll-target="#basic-data-wrangling">Basic Data Wrangling</a>
  <ul class="collapse">
  <li><a href="#accessing-subsets-of-data" id="toc-accessing-subsets-of-data" class="nav-link" data-scroll-target="#accessing-subsets-of-data">Accessing subsets of data</a></li>
  <li><a href="#accessing-by-a-condition" id="toc-accessing-by-a-condition" class="nav-link" data-scroll-target="#accessing-by-a-condition">Accessing by a condition</a></li>
  <li><a href="#more-complex-conditions" id="toc-more-complex-conditions" class="nav-link" data-scroll-target="#more-complex-conditions">More complex conditions</a></li>
  <li><a href="#editing-specific-entries" id="toc-editing-specific-entries" class="nav-link" data-scroll-target="#editing-specific-entries">Editing specific entries</a></li>
  <li><a href="#editing-entries-via-a-condition" id="toc-editing-entries-via-a-condition" class="nav-link" data-scroll-target="#editing-entries-via-a-condition">Editing entries via a condition</a></li>
  <li><a href="#addingchanging-a-variable" id="toc-addingchanging-a-variable" class="nav-link" data-scroll-target="#addingchanging-a-variable">Adding/Changing a variable</a></li>
  <li><a href="#removing-rows-or-columns" id="toc-removing-rows-or-columns" class="nav-link" data-scroll-target="#removing-rows-or-columns">Removing rows or columns</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">2: More R - Basic Data Skills</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- __Reading time: 25 minutes__   -->
<div class="lo">
<p>This reading:</p>
<ul>
<li>How does R store data?<br>
</li>
<li>What can R <em>do</em> with data?<br>
</li>
<li>How can we use R to access and manipulate data?</li>
</ul>
</div>
<section id="vectors" class="level1">
<h1>Vectors</h1>
<p>We’ve already seen how to assign a value to a name/symbol using <code>&lt;-</code>. However, we’ve only seen how to assign a single number, e.g:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">5</span> <span class="co"># assign the value 5 to the name "x"</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>x <span class="co"># print the object named "x"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
<p>In almost all cases, the data we are working with will be more than just an individual number. We might have measured the IQ of 20 different people, in which case we have 20 numbers representing IQ scores. More commonly, we work with 2-Dimensional arrays of numbers, e.g.&nbsp;each row is an observation, and each column represents something we have measured.</p>
<p>To store a sequence of numbers into R, we can <em>combine</em> the values using <code>c()</code> and give the sequence a name. A sequence of elements all of the same type is called a <strong>vector</strong>.<br>
As before, to view the stored content, we simply type the name of the vector:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>myfirstvector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">7</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>myfirstvector</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 5 3 7</code></pre>
</div>
</div>
<p>We can perform arithmetic operations on each value of the vector.<br>
For example, to add five to each entry:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>myfirstvector <span class="sc">+</span> <span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  6 10  8 12</code></pre>
</div>
</div>
<p>To reiterate, vectors are sequences of elements <strong>all of the same type</strong>. A vectors does not have to be a sequence of numbers, it could be a sequence of words, such as the names of different types of animals.<br>
Words need to be written inside quotations, e.g.&nbsp;“anything”, and instead of being of numeric type, we say they are characters.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>wordsvector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"cat"</span>, <span class="st">"dog"</span>, <span class="st">"parrot"</span>, <span class="st">"peppapig"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>wordsvector</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "cat"      "dog"      "parrot"   "peppapig"</code></pre>
</div>
</div>
<div class="rtip">
<p>You can use either double-quote or single-quote:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">"cat"</span>, <span class="st">"dog"</span>, <span class="st">"parrot"</span>, <span class="st">"horse"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "cat"    "dog"    "parrot" "horse" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">'cat'</span>, <span class="st">'dog'</span>, <span class="st">'parrot'</span>, <span class="st">'horse'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "cat"    "dog"    "parrot" "horse" </code></pre>
</div>
</div>
</div>
<p>It does not make sense to add a number to words, hence some operations like addition and multiplication are only defined on vectors of numeric type. If you make a mistake, R will warn you with a red error message.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>wordsvector <span class="sc">+</span> <span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p style="color:red">
Error in wordsvector + 5 : non-numeric argument to binary operator
</p>
<p>Finally, it is important to notice that if you combine together in a vector a number and a word, R will transform all elements to be of the same type. Why? Recall: vectors are sequences of elements <strong>all of the same type</strong>. Typically, R chooses the most general type between the two. In the example below, it makes everything a <strong>character</strong> (letters) (note the <code>"</code> around the 4), as it is unclear how to transform “cat” into a number!</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>mysecondvector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="st">"cat"</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>mysecondvector</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "4"   "cat"</code></pre>
</div>
</div>
<div class="divider div-transparent div-dot">

</div>
</section>
<section id="dataframes" class="level1">
<h1>Dataframes</h1>
<p>Now we have seen how we can store a set of values into a vector in R, we can move to thinking about data in a more intuitive way.</p>
<p>Typically, when we imagine “collecting data”, we imagine asking a sample of people a bunch of questions (e.g.&nbsp;we might ask them their height, age, hair colour etc). So we could have a vector of heights, another vector of ages, and another of hair colours.</p>
<p>Rather than storing all of these as separate objects, it makes a lot more sense to organise them in two dimensions, very much like a spreadsheet. In R, a collection of vectors is termed a “dataframe”</p>
<div class="sticky">
<p><strong>Dataframes</strong> are simply collections of vectors of the same length.</p>
<p>Typically, all vectors are ordered to ensure that a given row represents the characteristics of a single observation</p>
<p><img src="images/installing_intro/dataframe.jpg" class="img-fluid"></p>
</div>
<p>For instance, we could imagine a dataframe containing information on the name and birth year of each member of The Beatles. The easiest way to think of this would be to have a row for each Beatle, and a column for each of their names and their birth-years. Note that each vector contains all the same type of information (the names are all strings of characters, and the birth years are all numbers).</p>
<div class="rtip">
<p>We <em>can</em>, if we want to, create a dataframe inside R, by giving it a collection of vectors:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">c</span>(<span class="st">"john"</span>,<span class="st">"paul"</span>,<span class="st">"george"</span>,<span class="st">"ringo"</span>),</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">birth_year =</span> <span class="fu">c</span>(<span class="dv">1940</span>,<span class="dv">1942</span>,<span class="dv">1943</span>,<span class="dv">1940</span>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    name birth_year
1   john       1940
2   paul       1942
3 george       1943
4  ringo       1940</code></pre>
</div>
</div>
</div>
<p>While we can manually create data like above, more often we will need to <em>import</em> into R some data which has been created elsewhere (like in excel, or by some software which is used to present participants with experiments, or collect responses to questionnaires).</p>
<p>Let’s suppose we have instead entered data in something like Microsoft Excel, or LibreOffice Calc, or whatever spreadsheet software we have available (<a href="#fig-excel" class="quarto-xref">Figure&nbsp;1</a>).</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-excel" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-excel-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/installing_intro/create_data.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:49.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-excel-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Data entered in spreadsheet software like Microsoft Excel
</figcaption>
</figure>
</div>
</div>
</div>
<p>We can then save that data as a <strong>.csv</strong> file. Although R can read data when it’s saved in Microsoft/LibreOffice formats, the simplest, and most universal way to save data is as simple text, with the values separated by some character. The <strong>.csv</strong> format stands for <strong>comma separated values.</strong><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>Back in RStudio, we need to have a way of getting the information contained in that file <em>into</em> R’s environment, so that we can do things with it. We can do this by using the <code>read.csv()</code> function, and directing it to the file you just saved.</p>
<div class="hints">
<p><em>note: if you are using RStudio on a server - i.e.&nbsp;accessing it via a web-browser - then you will need to upload the file you just saved to the server (see the “upload” button in the Files tab in the bottom right pane of R).</em></p>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="st">"data_from_excel.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>    name birth_year
1   John       1940
2   Paul       1942
3 George       1943
4  Ringo       1940</code></pre>
</div>
</div>
<div class="rtip">
<p><strong>Helpful tip</strong></p>
<p>If you have your text-cursor inside the quotation marks, and press the tab key on your keyboard, it will show you the files inside your project. You can then use the arrow keys to choose between them and press Enter to add the code.</p>
</div>
<p>There’s one more thing that we need to do, and that is to actually store this information in our environment. Currently, it is just printing out the data. We need to assign it a name:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>beatles <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data_from_excel.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We should now have something called “beatles” which is visible in the <em>environment</em> pane of RStudio (top right).</p>
<p>And we can print it out by simply invoking its name:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>beatles</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    name birth_year
1   John       1940
2   Paul       1942
3 George       1943
4  Ringo       1940</code></pre>
</div>
</div>
<p>And we can do things such as ask R how many rows and columns there are (asking for the “dimensions” using <code>dim()</code>):</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(beatles)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4 2</code></pre>
</div>
</div>
<p>This says that there are 4 members of the Beatles, and for each we have 2 measurements (name and birth-year).</p>
<p>To get more insight into what the data actually are, you can either use <code>str()</code> to see the structure:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(beatles)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   4 obs. of  2 variables:
 $ name      : chr  "John" "Paul" "George" "Ringo"
 $ birth_year: int  1940 1942 1943 1940</code></pre>
</div>
</div>
<div class="divider div-transparent div-dot">

</div>
</section>
<section id="functions" class="level1">
<h1>Functions</h1>
<p>We’ve just seen some use of <code>c()</code>, <code>read.csv()</code>, <code>dim()</code> and <code>str()</code>.</p>
<p>There’s something that all these things have in common - they are <strong>functions.</strong></p>
<div class="sticky">
<p><strong>Functions</strong> perform specific operations / transformations in computer programming.</p>
<p>They can have <strong>inputs</strong> and <strong>outputs</strong>. For example, <code>dim()</code> takes some data you have stored in R as its <strong>input</strong>, and gives the dimensions of the data as its <strong>output</strong>.</p>
</div>
<p>There are loads and loads of functions in R. This is really where the power lies. Here is a demonstration of a couple of basic ones. Hopefully you can guess what they are doing?</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>myfirstvector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">7</span>)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(myfirstvector)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(myfirstvector)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
<div class="rtip">
<p><strong>Getting Help on Functions</strong></p>
<p>Almost all functions in R will have associated documentation describing what they do. If we don’t know what a function does, we can read the help docs by typing a question mark and then the function name, and running it in R. <code>?mean</code> will bring up a little help page in the bottom-right pane of RStudio</p>
</div>
<div class="divider div-transparent div-dot">

</div>
</section>
<section id="r-packages" class="level1">
<h1>R Packages</h1>
<p>Alongside the basic installation of R and RStudio, there are many add-on packages which the R community create and maintain. The thousands of packages are part of what makes R such a powerful and useful tool - there is a package for almost everything you could want to do in R.</p>
<div class="sticky">
<p><strong>Packages</strong> are bundles of functions, code, data, documentation, etc.</p>
<p>To install a package onto our computer we use <code>install.packages("package name")</code>.<br>
Then, any time that we want to use that package we just need to load it into our current R session with <code>library(package name)</code>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-libraries" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-libraries-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/installing_intro/libraries.jpeg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:60.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-libraries-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Source: <a href="https://twitter.com/visnut/status/1248087845589274624"><span class="citation" data-cites="visnut">@visnut</span></a>
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<div class="frame">
<center>
<strong>Example: Installing and using a package</strong>
</center>
<p>Here we’re going to install a silly package called <strong>cowsay</strong>:</p>
<p>Write this code <strong>directly into the console</strong> and run it:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"cowsay"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This spits out a lot of messages, before (hopefully) ending with something similar to:</p>
<p style="color:red;margin-left:30px;">
…<br> …<br> * DONE (cowsay)<br> <br> The downloaded source packages are in<br> ‘/tmp/RtmpIRbMnh/downloaded_packages’
</p>
<p><span style="color:blue;margin-left:30px;">&gt;</span></p>
<p>Now that we’ve installed it, to use it we just need to load it into our R session, by using <code>library()</code>.<br>
<strong>Back in your script</strong>, use this code to load the package:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowsay)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Which enables us to now use some of the functionality that is in that package, such as the <code>say()</code> function, which makes some silly art out of punctuation symbols:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">say</span>(<span class="st">"Welcome to the USMR course!"</span>, <span class="at">by =</span> <span class="st">"owl"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 _____________________________ 
&lt; Welcome to the USMR course! &gt;
 ----------------------------- 
    \
     \

       /\___/\
       {o}{o}|
       \ v  /|
       |    \ \
        \___/_/       [ab]
          | |</code></pre>
</div>
</div>
</div>
<div style="max-width:49%;display:inline-block;vertical-align:middle">
<p>It’s good practice to have all the packages you use for an analysis loaded at the top of your script.</p>
<p>A typical structure for an R script is to:</p>
<ol type="1">
<li>load all the required packages</li>
<li>read in the data</li>
<li>conduct your analysis</li>
</ol>
</div>
<div style="max-width:49%;display:inline-block;vertical-align:top">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-packload" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-packload-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/installing_intro/packload.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-packload-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Typical script layout
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<div class="rtip">
<p>We will be using these packages quite a lot in this course, so you might want to install them now, by writing <code>install.packages("PACKAGE_NAME")</code> in your console:</p>
<ul>
<li>tidyverse</li>
<li>patchwork</li>
</ul>
<p>It might take a few minutes for them to install, so just sit back and take a breather.</p>
</div>
<div class="divider div-transparent div-dot">

</div>
</section>
<section id="checkpoint---where-are-you-writing-your-code" class="level1">
<h1>Checkpoint - where are you writing your code?</h1>
<p>Hopefully, if you are following along with us, you are writing almost all of your code in a script, and not in the console. <strong>Remember: Code that you write in the console is <em>not</em> saved</strong>.</p>
<p>However, when we installed packages above, we suggested you write directly into the console.<br>
Why? Because sometimes, for certain things, we don’t want to keep a record of that bit of code. We only ever want to install a package <strong>once</strong>, because after that first time it’s going to be installed on our computer, so we’re not going to need to run <code>install.packages("cowsay")</code> again.</p>
<p>Consider the example code below. The 2nd, 3rd, and 5th lines do absolutely nothing to our computations with x and y. They are just for our own workings. Because lines like this have no consequences on code below, our R script will have the same end-point with and without those line.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span><span class="sc">*</span><span class="dv">33</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">6</span><span class="sc">/</span><span class="dv">100</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>?mean</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>answer <span class="ot">&lt;-</span> x<span class="sc">*</span>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In general, the vast majority of the code you write will be in the script, and you will only use the console occasionally for quick commands that aren’t doing anything to change our analysis. For example, we don’t want to keep <strong>re-</strong>installing packages over and over again (each time we run a script), so we’ll tend to use <code>install.packages()</code> in the console. Similarly, when we look up the help documentation for a function (e.g.&nbsp;by running <code>?mean</code>), we type that into the console, and not a script.</p>
<p>This will become second nature as you use R more and more, but it’s helpful to get into good habits early on.</p>
<div class="sticky">
<p><strong>Rules of thumb</strong></p>
<ul>
<li>If a line of code changes something in the environment, then that code should be written in the script.<br>
</li>
<li>If you clear your environment, restart R, and run your script all at once (see the section on <a href="01_R.html#Good_Habits" target="_blank">‘Good Habits’ in Chapter 1</a>), it shouldn’t produce errors and should get you back to your current place</li>
</ul>
<p>If we don’t follow the above suggestions, then our work will not be <strong>reproducible</strong> (e.g.&nbsp;you send your script to someone and they will get a different answer from you when they run it).</p>
</div>
<div class="divider div-transparent div-dot">

</div>
</section>
<section id="basic-data-wrangling" class="level1">
<h1>Basic Data Wrangling</h1>
<p>Now that we’ve started to learn about vectors and dataframes, we’re going to look at reading in a bigger dataset, exploring some of the variables, and the syntax we can use to access and edit certain bits of the data.</p>
<p>First we’ll read in our data:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>starwars2 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://uoepsy.github.io/data/starwars2.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="rtip">
<p><strong>Reading data from a URL</strong></p>
<p>Note that when you have a url for some data (e.g.&nbsp;<a href="https://raw.githubusercontent.com/uoepsy/data/master/starwars2.csv">this</a>) you can read it in directly by giving functions like <code>read.csv()</code> the url inside quotation marks.</p>
</div>
<p>The data contains information on various characteristics of characters from Star Wars. We can print out the top of the data by using the <code>head()</code> function which displays the first six rows of the data by default. You could change this by saying, for example, <code>head(data, n = 10)</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(starwars2, <span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 name height    hair_color eye_color homeworld species
1      Luke Skywalker    172         blond      blue  Tatooine   Human
2               C-3PO    167          &lt;NA&gt;    yellow  Tatooine   Human
3               R2-D2     96          &lt;NA&gt;       red     Naboo   Droid
4         Darth Vader    202          none    yellow  Tatooine   Human
5         Leia Organa    150         brown     brown  Alderaan   Human
6           Owen Lars    178   brown, grey      blue  Tatooine   Human
7  Beru Whitesun lars    165         brown      blue  Tatooine   Human
8               R5-D4     97          &lt;NA&gt;       red  Tatooine   Droid
9   Biggs Darklighter    183         black     brown  Tatooine   Human
10     Obi-Wan Kenobi    182 auburn, white blue-gray   Stewjon   Human</code></pre>
</div>
</div>
<p><em>(Don’t worry about the</em> NAs <em>for now, they are just how R tells you an entry is missing, i.e.&nbsp;Not Available.)</em></p>
<div class="rtip">
<p>Try clicking on the data in your <strong>environment</strong> (the top right window of RStudio). It will open the data in a tab in the editor window - this is another way of looking at the data, more like you would in spreadsheet software like Microsoft Excel.</p>
<p>This can be time-consuming and awkward if your data file is big (i.e.&nbsp;lots of columns, or lots of rows, or both!).</p>
</div>
<p>We can take a look at how big the data is (the dimensions), using <code>dim()</code></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(starwars2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 75  6</code></pre>
</div>
</div>
<p>We can see that there are 75 rows and 6 columns. In this dataset, each Star Wars character is an <strong>observational unit</strong>, and there are 6 <strong>variables</strong> (things which vary between units) such as their <em>height</em>, <em>species</em>, <em>homeworld</em>, etc.</p>
<div class="sticky">
<p><strong>observations and variables</strong></p>
<p>The individual entities on which data are collected are called <strong>observational units</strong> or <strong>cases</strong>. Often (but not always), these equate to the rows of a dataset.</p>
<p>A <strong>variable</strong> is any characteristic that varies from observational unit to observational unit (these are often the columns of the dataset)</p>
</div>
<section id="accessing-subsets-of-data" class="level2">
<h2 class="anchored" data-anchor-id="accessing-subsets-of-data">Accessing subsets of data</h2>
<p>What if we want to extract certain subsections of our dataset, such as specific observational units or variables? This is where we learn about two important bits of R code used to access parts of data - the dollar sign <code>$</code>, and the square brackets <code>[]</code>.</p>
<div class="rtip">
<p><strong>The dollar sign $</strong></p>
<p>The dollar sign allows us to extract a specific variable from a dataframe. For instance, we can pull out the variable named “eye_color” in the data, by using <code>$eye_color</code> after the name that we gave our dataframe.</p>
<p>Remember that each variable in a dataframe is a vector (a set of values). Once extracted, we will have a vector and not a dataframe.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>starwars2<span class="sc">$</span>eye_color</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "blue"          "yellow"        "red"           "yellow"       
 [5] "brown"         "blue"          "blue"          "red"          
 [9] "brown"         "blue-gray"     "blue"          "blue"         
[13] "blue"          "brown"         "black"         "orange"       
[17] "hazel"         "blue"          "yellow"        "brown"        
[21] "red"           "brown"         "blue"          "orange"       
[25] "blue"          "brown"         "black"         "red"          
[29] "blue"          "orange"        "orange"        "orange"       
[33] "yellow"        "orange"        NA              "brown"        
[37] "yellow"        "pink"          "hazel"         "yellow"       
[41] "black"         "orange"        "brown"         "yellow"       
[45] "black"         "brown"         "blue"          "orange"       
[49] "yellow"        "black"         "blue"          "brown"        
[53] "brown"         "blue"          "yellow"        "blue"         
[57] "blue"          "brown"         "brown"         "brown"        
[61] "brown"         "yellow"        "yellow"        "black"        
[65] "black"         "blue"          "unknown"       "unknown"      
[69] "gold"          "black"         "green, yellow" "blue"         
[73] "brown"         "black"         NA             </code></pre>
</div>
</div>
</div>
<div class="rtip">
<p><strong>The square brackets []</strong></p>
<p>Square brackets are used to do what is known as <strong>indexing</strong> (finding specific entries in your data).<br>
We can retrieve bits of data by identifying the <span class="math inline">\(i^{th}\)</span> entry(s) inside the square brackets, for instance:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># assign the numbers 10, 20 ... 100 to the name "somevalues"</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>somevalues <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">80</span>, <span class="dv">90</span>, <span class="dv">100</span>)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co"># pull out the 3rd entry</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>somevalues[<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 30</code></pre>
</div>
</div>
In the above example, we have a <strong>vector</strong> (a single sequence of values), and so we can retrieve entries with the syntax:
<center>
<strong>vector[entry]</strong>
</center>
<br> In a <strong>dataframe</strong> we have an extra dimension - we have rows <em>and</em> columns. Using square brackets with a dataframe needs us to specify both:<br>

<center>
<strong>dataframe[rows, columns]</strong>
</center>
</div>
<p>Let’s look at some examples:</p>
<div class="panelset">
<section id="examples-of-indexing" class="level4 panel">
<h4 class="anchored" data-anchor-id="examples-of-indexing">Examples of Indexing</h4>
<ol type="1">
<li>Specifying row number and column number:</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># first row, fourth column</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>starwars2[<span class="dv">1</span>, <span class="dv">4</span>]</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="co"># tenth row, first column</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>starwars2[<span class="dv">10</span>, <span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>If we leave either rows or columns blank, then we will get out <strong>all</strong> of them:</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tenth row, all columns</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>starwars2[<span class="dv">10</span>, ]</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="co"># all rows, 2nd column</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>starwars2[ , <span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li>There are is another way to identify column - we can use the name in quotation marks:</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># first row, "species" column</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>starwars2[<span class="dv">1</span>, <span class="st">"species"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="4" type="1">
<li>We can also ask for multiple rows, or multiple columns, or both! To do that, we use <code>c()</code>:</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the 1st AND the 6th rows, and the 1st AND 3rd columns</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>starwars2[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">6</span>), <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)] </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="5" type="1">
<li>And we can specify a sequence using the colon, <code>from:to</code>: <a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># FROM the 1st TO the 6th row, all columns</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>starwars2[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, ] </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="6" type="1">
<li>We can even use the two accessors in combination:<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract the variable called "name" and show the 20th entry</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>starwars2<span class="sc">$</span>name[<span class="dv">20</span>]  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="show-me-the-output" class="level4 panel">
<h4 class="anchored" data-anchor-id="show-me-the-output">Show me the output</h4>
<ol type="1">
<li>Specifying row number and column number:</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># first row, fourth column</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>starwars2[<span class="dv">1</span>, <span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "blue"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tenth row, first column</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>starwars2[<span class="dv">10</span>, <span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Obi-Wan Kenobi"</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>If we leave either rows or columns blank, then we will get out <strong>all</strong> of them:</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tenth row, all columns</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>starwars2[<span class="dv">10</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             name height    hair_color eye_color homeworld species
10 Obi-Wan Kenobi    182 auburn, white blue-gray   Stewjon   Human</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># all rows, 2nd column</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>starwars2[ , <span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 172 167  96 202 150 178 165  97 183 182 188 180 228 180 173 175 170 180 170
[20] 183 190 177 175 180 150  88 160 191 170 196 224 206 137 112 170 163 175 180
[39] 178  94 122 163 188 198 196 171 184 188 264 188 196 185 157 183 183 170 166
[58] 165 193 191 183 168 198 229 213 167  79 193 191 178 216 234 188 206 180</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>There are is another way to identify column - we can use the name in quotation marks:</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># first row, "species" column</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>starwars2[<span class="dv">1</span>, <span class="st">"species"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Human"</code></pre>
</div>
</div>
<ol start="4" type="1">
<li>We can also ask for multiple rows, or multiple columns, or both! To do that, we use <code>c()</code>:</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the 1st AND the 6th rows, and the 1st AND 3rd columns</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>starwars2[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">6</span>), <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)] </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            name  hair_color
1 Luke Skywalker       blond
6      Owen Lars brown, grey</code></pre>
</div>
</div>
<ol start="5" type="1">
<li>And we can specify a sequence using the colon, <code>from:to</code>:</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># FROM the 1st TO the 6th row, all columns</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>starwars2[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, ] </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            name height  hair_color eye_color homeworld species
1 Luke Skywalker    172       blond      blue  Tatooine   Human
2          C-3PO    167        &lt;NA&gt;    yellow  Tatooine   Human
3          R2-D2     96        &lt;NA&gt;       red     Naboo   Droid
4    Darth Vader    202        none    yellow  Tatooine   Human
5    Leia Organa    150       brown     brown  Alderaan   Human
6      Owen Lars    178 brown, grey      blue  Tatooine   Human</code></pre>
</div>
</div>
<ol start="6" type="1">
<li>We can even use the two accessors in combination:</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract the variable called "name" and show the 20th entry</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>starwars2<span class="sc">$</span>name[<span class="dv">20</span>]  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Boba Fett"</code></pre>
</div>
</div>
</section>
</div>
<div class="sticky">
<p><strong>The dollar sign $</strong></p>
<p>Used to extract a variable from a dataframe:</p>
<ul>
<li><code>dataframe$variable</code></li>
</ul>
<p><strong>The square brackets []</strong></p>
<p>Used to extract parts of an R object by identifying rows and/or columns, or more generally, “entries”. Left blank will return all.</p>
<ul>
<li><code>vector[entries]</code></li>
<li><code>dataframe[rows, columns]</code></li>
</ul>
</div>
</section>
<section id="accessing-by-a-condition" class="level2">
<h2 class="anchored" data-anchor-id="accessing-by-a-condition">Accessing by a condition</h2>
<p>We can also do something really useful, which is to access all the entries in the data for which <em>a specific condition</em> is true.</p>
<p>Let’s take a simple example to start:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>somevalues <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">20</span>, <span class="dv">15</span>, <span class="dv">40</span>, <span class="dv">10</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">35</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To only select values which are greater than 20, we can use:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>somevalues[somevalues <span class="sc">&gt;</span> <span class="dv">20</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 40 40 50 35</code></pre>
</div>
</div>
<div class="frame">
<p><strong>Unpacking:</strong> <code>somevalues[somevalues &gt; 20]</code><br>
<br> First, let’s look at what <code>somevalues &gt; 20</code> does. It returns TRUE for the entries of <code>somevalues</code> which are greater than 20, and FALSE for the entries of <code>somevalues</code> that are not (that is, which are less than, or equal to, 20.</p>
<p>This statement <code>somevalues &gt; 20</code> is called the <strong>condition</strong>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>somevalues <span class="sc">&gt;</span> <span class="dv">20</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE  TRUE  TRUE</code></pre>
</div>
</div>
<p>Now consider putting that sequence of TRUEs and FALSEs inside the square brackets in <code>somevalues[]</code>. This returns only the entries of <code>somevalues</code> for which the condition is <code>TRUE</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>somevalues[<span class="fu">c</span>(<span class="cn">FALSE</span>,<span class="cn">FALSE</span>,<span class="cn">FALSE</span>,<span class="cn">FALSE</span>,<span class="cn">FALSE</span>,<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">TRUE</span>,<span class="cn">TRUE</span>,<span class="cn">TRUE</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 40 40 50 35</code></pre>
</div>
</div>
<p>So what we’re doing is using a <strong>condition</strong> inside the square brackets to return all the values for which that condition is TRUE.</p>
<p>And we’re being super efficient, because we don’t want to write out TRUEs and FALSEs all day, so we just give the conditional question inside the brackets directly:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>somevalues[somevalues <span class="sc">&gt;</span> <span class="dv">20</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 40 40 50 35</code></pre>
</div>
</div>
</div>
<p><br> We can extend this same logic to a dataframe. Let’s suppose we want to access all the entries in our Star Wars data who have the value “Droid” in the <em>species</em> variable. To work out how to do this, we first need a line of code which defines our <strong>condition</strong> - one which returns <code>TRUE</code> for each entry of the <em>species</em> variable which is “Droid”, and <code>FALSE</code> for those that are not “Droid”.</p>
<p>We can use the dollar sign to pull out the <em>species</em> variable:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>starwars2<span class="sc">$</span>species</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Human"        "Human"        "Droid"        "Human"        "Human"       
 [6] "Human"        "Human"        "Droid"        "Human"        "Human"       
[11] "Human"        "Human"        "Wookiee"      "Human"        "Rodian"      
[16] "Hutt"         "Human"        "Human"        "Human"        "Human"       
[21] "Trandoshan"   "Human"        "Human"        "Mon Calamari" "Human"       
[26] "Ewok"         "Sullustan"    "Neimodian"    "Human"        "Gungan"      
[31] "Gungan"       "Gungan"       "Toydarian"    "Dug"          "unknown"     
[36] "Human"        "Zabrak"       "Twi'lek"      "Twi'lek"      "Vulptereen"  
[41] "Xexto"        "Toong"        "Human"        "Cerean"       "Nautolan"    
[46] "Zabrak"       "Tholothian"   "Iktotchi"     "Quermian"     "Kel Dor"     
[51] "Chagrian"     "Human"        "Human"        "Human"        "Geonosian"   
[56] "Mirialan"     "Mirialan"     "Human"        "Human"        "Human"       
[61] "Human"        "Clawdite"     "Besalisk"     "Kaminoan"     "Kaminoan"    
[66] "Human"        "Aleena"       "Skakoan"      "Muun"         "Togruta"     
[71] "Kaleesh"      "Wookiee"      "Human"        "Pau'an"       "unknown"     </code></pre>
</div>
</div>
<p>And we can ask R whether each value <strong>is equal to</strong> “Droid”</p>
<div class="hints">
<p><em>Remember:</em> in R, we ask whether something <strong>is equal to</strong> something else by using a double-equals, <code>==</code>. A single equal sign would be wrong, as it denotes assignment.</p>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>starwars2<span class="sc">$</span>species <span class="sc">==</span> <span class="st">"Droid"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE
[13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[73] FALSE FALSE FALSE</code></pre>
</div>
</div>
<p>Finally, we can use this condition inside our square brackets to access the entries of the data for which this condition is TRUE:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I would read the code below as: </span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="co"># "In the starwars2 dataframe, give me all the rows </span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a><span class="co"># for which the condition starwars2$species=="Droid"</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a><span class="co"># is TRUE, and give me all the columns."</span></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>starwars2[starwars2<span class="sc">$</span>species <span class="sc">==</span> <span class="st">"Droid"</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   name height hair_color eye_color homeworld species
3 R2-D2     96       &lt;NA&gt;       red     Naboo   Droid
8 R5-D4     97       &lt;NA&gt;       red  Tatooine   Droid</code></pre>
</div>
</div>
<!-- 

<div class="optional-begin"><button id='opt-start-1' class="jk-circle-right optional-icon clickable" onclick="toggle_visibility('opt-body-1', 'opt-start-1')"> Optional: with(). </button></div><div class="optional-body" id = "opt-body-1" style="display: none;">

 -->
<!-- A useful function is `with()`. This creates a "container" where the variables of the dataframe are available to R within the `with()` parentheses without the need to use `$`: -->
<!-- ```{r} -->
<!-- with(starwars2, starwars2[species == "Droid", ]) -->
<!-- ``` -->
<!-- 

</div><p class="optional-end"></p>

 -->
</section>
<section id="more-complex-conditions" class="level2">
<h2 class="anchored" data-anchor-id="more-complex-conditions">More complex conditions</h2>
<p>Thinking back to Chapter 1 when we first introduced R, we <a href="01_R.html#R_is_a_calculator" target="_blank">talked briefly about “logical operators”</a>. Specifically, the operators <code>&amp;</code>, <code>|</code>, and <code>!</code> (for “and”, “or”,” and “not”), will come in handy now.</p>
<p>For instance, we can now extract all those in the dataset which are humans <em>and</em> taller than 190cm:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># "In the starwars2 dataframe, give me all the rows for which the</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="co"># condition starwars2$species=="Human" AND starwars2$height &gt; 190 are TRUE, </span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="co"># and give me all the columns."</span></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>starwars2[starwars2<span class="sc">$</span>species <span class="sc">==</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> starwars2<span class="sc">$</span>height <span class="sc">&gt;</span> <span class="dv">190</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  name height hair_color eye_color homeworld species
4          Darth Vader    202       none    yellow  Tatooine   Human
59               Dooku    193      white     brown   Serenno   Human
60 Bail Prestor Organa    191      black     brown  Alderaan   Human</code></pre>
</div>
</div>
<p>Or we can extract all those in the dataset which are <em>either</em> droids <em>or</em> ewoks:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># "In the starwars2 dataframe, give me all the rows for which the</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="co"># condition starwars2$species=="Droid" OR starwars2$species=="Ewok" is TRUE, </span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="co"># and give me all the columns."</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>starwars2[starwars2<span class="sc">$</span>species <span class="sc">==</span> <span class="st">"Droid"</span> <span class="sc">|</span> starwars2<span class="sc">$</span>species <span class="sc">==</span> <span class="st">"Ewok"</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    name height hair_color eye_color homeworld species
3                  R2-D2     96       &lt;NA&gt;       red     Naboo   Droid
8                  R5-D4     97       &lt;NA&gt;       red  Tatooine   Droid
26 Wicket Systri Warrick     88      brown     brown     Endor    Ewok</code></pre>
</div>
</div>
</section>
<section id="editing-specific-entries" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="editing-specific-entries">Editing specific entries</h2>
<p>Now that we’ve seen a few ways of <em>accessing</em> sections of data, we can learn how to edit them! One of the most common reasons you will need to modify entries in your data is in <strong>data cleaning</strong>. This is the process of identifying incorrect / incomplete / irrelevant data, and replacing / modifying / deleting them.</p>
<p>Above, we looked at the subsection of the data where the <em>species</em> variable had the entry “Droid”. Some of you may have noticed earlier that we had some data on C3PO. Are they not also a droid?</p>
<center>
<img src="images/categorical/c3po.png" class="img-fluid">
</center>
<p>(Looks pretty Droid-y to me! <em>disclaimer: I know nothing about Star Wars</em> 🙂 )</p>
<p>Just as we saw above how to <em>access</em> specific entries, e.g.:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2nd row, all columns</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>starwars2[<span class="dv">2</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   name height hair_color eye_color homeworld species
2 C-3PO    167       &lt;NA&gt;    yellow  Tatooine   Human</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2nd row, 6th column (the "species" column)</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>starwars2[<span class="dv">2</span>,<span class="dv">6</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Human"</code></pre>
</div>
</div>
<p>We can change these by <strong>assigning them a new value</strong> (remember the <code>&lt;-</code> symbol). In doing so, we <em>overwrite</em><a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> the entry in the 2nd row and 6th column of the data (<code>starwars2[2,6]</code>) with the value “Droid”.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># C3PO is a droid, not a human</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>starwars2[<span class="dv">2</span>,<span class="dv">6</span>] <span class="ot">&lt;-</span> <span class="st">"Droid"</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Look at the 2nd row now -</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a><span class="co"># the entry in the "species" column has changed:</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>starwars2[<span class="dv">2</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   name height hair_color eye_color homeworld species
2 C-3PO    167       &lt;NA&gt;    yellow  Tatooine   Droid</code></pre>
</div>
</div>
</section>
<section id="editing-entries-via-a-condition" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="editing-entries-via-a-condition">Editing entries via a condition</h2>
<p>We saw above how to access parts of data by means of a <strong>condition</strong>, with code such as:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># "In the starwars2 dataframe, give me all the rows for which the</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="co"># condition starwars2$homeworld=="Naboo" is TRUE, and give me all the columns."</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>starwars2[starwars2<span class="sc">$</span>homeworld<span class="sc">==</span><span class="st">"Naboo"</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            name height hair_color eye_color homeworld species
3          R2-D2     96       &lt;NA&gt;       red     Naboo   Droid
19     Palpatine    170       grey    yellow     Naboo   Human
30 Jar Jar Binks    196       none    orange     Naboo  Gungan
31  Roos Tarpals    224       none    orange     Naboo  Gungan
32    Rugor Nass    206       none    orange     Naboo  Gungan
52  Gregar Typho    185      black     brown     Naboo   Human
53         Cordé    157      brown     brown     Naboo   Human
58         Dormé    165      brown     brown     Naboo   Human</code></pre>
</div>
</div>
<p>What if we wanted to modify it so that every character from “Naboo” was actually of species “Nabooian”?</p>
<p>We can do that in a number of ways, all of which do the same thing - namely, they access parts of the data and assign them the new value “Nabooian”.</p>
<p>The lines of code below all do exactly that, in different ways. We’ve also tried to give a way of interepreting each line.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In the starwars2 data, give the rows for which condition </span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="co"># starwars2$homeworld=="Naboo" is TRUE, and select only the "species" column. </span></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign to these selected entries the value "Nabooian".</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>starwars2[starwars2<span class="sc">$</span>homeworld<span class="sc">==</span><span class="st">"Naboo"</span>, <span class="st">"species"</span>] <span class="ot">&lt;-</span> <span class="st">"Nabooian"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In the starwars2 data, give the rows for which condition </span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="co"># starwars2$homeworld=="Naboo" is TRUE, and select only the 6th column. </span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign to these selected entries the value "Nabooian".</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>starwars2[starwars2<span class="sc">$</span>homeworld<span class="sc">==</span><span class="st">"Naboo"</span>, <span class="dv">6</span>] <span class="ot">&lt;-</span> <span class="st">"Nabooian"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the species variable from the starwars2 data (it's a vector).</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Pick the entries for which the condition starwars2$homeworld=="Naboo" is TRUE.</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign to these selected entries the value "Nabooian".</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>starwars2<span class="sc">$</span>species[starwars2<span class="sc">$</span>homeworld<span class="sc">==</span><span class="st">"Naboo"</span>] <span class="ot">&lt;-</span> <span class="st">"Nabooian"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
optional: a little extra…
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>In a similar way, we could have changed C-3PO to a Droid without ever having to know what row of the data they were in!</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># for the row(s) where the name variable in starwars2</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="co"># is equal to "C-3PO", in the species variable we assign</span></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="co"># that entry to be "Droid"</span></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>starwars2[starwars2<span class="sc">$</span>name<span class="sc">==</span><span class="st">"C-3PO"</span>, <span class="st">"species"</span>] <span class="ot">&lt;-</span> <span class="st">"Droid"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="addingchanging-a-variable" class="level2">
<h2 class="anchored" data-anchor-id="addingchanging-a-variable">Adding/Changing a variable</h2>
<p>Another thing we might want to do is change a whole variable (a whole column) in some way.<br>
The logic is exactly the same, for instance, we can take the variable “height” from the dataframe “starwars2”, dividing it by 100 via <code>starwars2$height / 100</code>, and then assign the result to the same variable name in the data, i.e.&nbsp;we overwrite the column:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>starwars2<span class="sc">$</span>height <span class="ot">&lt;-</span> starwars2<span class="sc">$</span>height <span class="sc">/</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We could instead have added a <em>new column</em> named “height_m” with those values if we did not want to overwrite “height”:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>starwars2<span class="sc">$</span>height_m <span class="ot">&lt;-</span> starwars2<span class="sc">$</span>height <span class="sc">/</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This would have left the “height” variable as-is, and created a new one called “height2” which was the values in “height” divided by 100.</p>
</section>
<section id="removing-rows-or-columns" class="level2">
<h2 class="anchored" data-anchor-id="removing-rows-or-columns">Removing rows or columns</h2>
<p>Lastly, we might want to change the data by removing a row or a column. Again, the logic remains the same, in that we use <code>&lt;-</code> to assign the edited data to a name (either a new name, thus creating a new object, or an existing name, thereby <em>overwriting</em> that object).</p>
<p>For instance, notice that the 35th and 75th rows of our data probably aren’t a valid observation - I’m reasonably sure that Marge and Homer Simpson never appeared in Star Wars:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>starwars2[<span class="fu">c</span>(<span class="dv">35</span>,<span class="dv">75</span>), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            name height hair_color eye_color   homeworld species
35 Marge Simpson    1.7       Blue      &lt;NA&gt; Springfield unknown
75 Homer Simpson    1.8       &lt;NA&gt;      &lt;NA&gt; Springfield unknown</code></pre>
</div>
</div>
<p>We can remove a certain row(s) by using a minus sign <code>-</code> inside the square brackets</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># everything minus the 75th row</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>starwars2[<span class="sc">-</span><span class="dv">75</span>, ]</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="co"># everything minus the (35th and 75th rows)</span></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>starwars2[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">35</span>, <span class="dv">75</span>), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And we can simply <em>re-use</em> the name “starwars2” to overwrite the data and make this change take effect (rather than just print out the result, which the code above did):</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>starwars2 <span class="ot">&lt;-</span> starwars2[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">35</span>, <span class="dv">75</span>), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>(now, in the <strong>environment</strong> pane of Rstudio, the object named “starwars2” will say 73 observations, rather than 75, which it had before - we’ve removed the 2 rows)</p>
<p><br> The same logic applies for columns:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new object called "anonymous_starwars2" and assign it </span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="co"># to the values which are the "starwars2" dataframe minus the </span></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1st column (the "name" column):</span></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>anonymous_starwars2 <span class="ot">&lt;-</span> starwars2[, <span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a><span class="co"># dimensions of our initial data</span></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(starwars2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 73  6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the data we just assigned has one fewer columns</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(anonymous_starwars2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 73  5</code></pre>
</div>
</div>
<div class="tocify-extend-page" data-unique="tocify-extend-page" style="height: 0;">

</div>
<div class="tocify-extend-page" data-unique="tocify-extend-page" style="height: 0;">

</div>


<script type="ojs-module-contents">
eyJjb250ZW50cyI6W119
</script>
<div id="exercise-loading-indicator" class="exercise-loading-indicator d-none d-flex align-items-center gap-2">
<div id="exercise-loading-status" class="d-flex gap-2">

</div>
<div class="spinner-grow spinner-grow-sm">

</div>
</div>
<script type="vfs-file">
W10=
</script>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>To save as .csv in Microsoft Excel, we go to <strong>File &gt; Save as</strong>, and then in the Save as Type box, choose to save the file as <strong>CSV (Comma delimited)</strong><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>The colon operator, <code>from:to</code>, creates a vector from the value <code>from</code> to the value <code>to</code> in steps of 1.<br>
For instance, <code>1:6</code> is the same as <code>c(1,2,3,4,5,6)</code>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Note: When we do this, we don’t have the comma inside the square brackets.<br>
When we use the <code>$</code> to pull out a variable, such as <code>starwars2$name</code>, we no longer have a dataframe.<br>
<code>starwars2$name</code> doesn’t have rows and columns, it just has a series of values - <em>it’s a vector!</em><br>
So when you are using <code>[]</code> with a <strong>vector</strong> (1 dimension) rather than a <strong>dataframe</strong> (2 dimensions), you don’t specify <code>[rows, columns]</code>, but simply <code>[entry]</code>.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>you could think of this as <em>replacing</em> / <em>overwriting</em> / <em>reassigning</em> the entry<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script>



/* update total correct if #webex-total_correct exists */

update_total_correct = function() {

  console.log("webex: update total_correct");



  var t = document.getElementsByClassName("webex-total_correct");

  for (var i = 0; i < t.length; i++) {

    p = t[i].parentElement;

    var correct = p.getElementsByClassName("webex-correct").length;

    var solvemes = p.getElementsByClassName("webex-solveme").length;

    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;

    var selects = p.getElementsByClassName("webex-select").length;



    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";

  }

}



/* webex-solution button toggling function */

b_func = function() {

  console.log("webex: toggle hide");



  var cl = this.parentElement.classList;

  if (cl.contains('open')) {

    cl.remove("open");

  } else {

    cl.add("open");

  }

}



/* check answers */

check_func = function() {

  console.log("webex: check answers");



  var cl = this.parentElement.classList;

  if (cl.contains('unchecked')) {

    cl.remove("unchecked");

    this.innerHTML = "Hide Answers";

  } else {

    cl.add("unchecked");

    this.innerHTML = "Show Answers";

  }

}



/* function for checking solveme answers */

solveme_func = function(e) {

  console.log("webex: check solveme");



  var real_answers = JSON.parse(this.dataset.answer);

  var my_answer = this.value;

  var cl = this.classList;

  if (cl.contains("ignorecase")) {

    my_answer = my_answer.toLowerCase();

  }

  if (cl.contains("nospaces")) {

    my_answer = my_answer.replace(/ /g, "")

  }



  if (my_answer == "") {

    cl.remove("webex-correct");

    cl.remove("webex-incorrect");

  } else if (real_answers.includes(my_answer)) {

    cl.add("webex-correct");

    cl.remove("webex-incorrect");

  } else {

    cl.add("webex-incorrect");

    cl.remove("webex-correct");

  }



  // match numeric answers within a specified tolerance

  if(this.dataset.tol > 0){

    var tol = JSON.parse(this.dataset.tol);

    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)

    if (matches.reduce((a, b) => a + b, 0) > 0) {

      cl.add("webex-correct");

    } else {

      cl.remove("webex-correct");

    }

  }



  // added regex bit

  if (cl.contains("regex")){

    answer_regex = RegExp(real_answers.join("|"))

    if (answer_regex.test(my_answer)) {

      cl.add("webex-correct");

    }

  }



  update_total_correct();

}



/* function for checking select answers */

select_func = function(e) {

  console.log("webex: check select");



  var cl = this.classList



  /* add style */

  cl.remove("webex-incorrect");

  cl.remove("webex-correct");

  if (this.value == "answer") {

    cl.add("webex-correct");

  } else if (this.value != "blank") {

    cl.add("webex-incorrect");

  }



  update_total_correct();

}



/* function for checking radiogroups answers */

radiogroups_func = function(e) {

  console.log("webex: check radiogroups");



  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');

  var cl = checked_button.parentElement.classList;

  var labels = checked_button.parentElement.parentElement.children;



  /* get rid of styles */

  for (i = 0; i < labels.length; i++) {

    labels[i].classList.remove("webex-incorrect");

    labels[i].classList.remove("webex-correct");

  }



  /* add style */

  if (checked_button.value == "answer") {

    cl.add("webex-correct");

  } else {

    cl.add("webex-incorrect");

  }



  update_total_correct();

}



window.onload = function() {

  console.log("webex onload");

  /* set up solution buttons */

  var buttons = document.getElementsByTagName("button");



  for (var i = 0; i < buttons.length; i++) {

    if (buttons[i].parentElement.classList.contains('webex-solution')) {

      buttons[i].onclick = b_func;

    }

  }



  var check_sections = document.getElementsByClassName("webex-check");

  console.log("check:", check_sections.length);

  for (var i = 0; i < check_sections.length; i++) {

    check_sections[i].classList.add("unchecked");



    let btn = document.createElement("button");

    btn.innerHTML = "Show Answers";

    btn.classList.add("webex-check-button");

    btn.onclick = check_func;

    check_sections[i].appendChild(btn);



    let spn = document.createElement("span");

    spn.classList.add("webex-total_correct");

    check_sections[i].appendChild(spn);

  }



  /* set up webex-solveme inputs */

  var solveme = document.getElementsByClassName("webex-solveme");



  for (var i = 0; i < solveme.length; i++) {

    /* make sure input boxes don't auto-anything */

    solveme[i].setAttribute("autocomplete","off");

    solveme[i].setAttribute("autocorrect", "off");

    solveme[i].setAttribute("autocapitalize", "off");

    solveme[i].setAttribute("spellcheck", "false");

    solveme[i].value = "";



    /* adjust answer for ignorecase or nospaces */

    var cl = solveme[i].classList;

    var real_answer = solveme[i].dataset.answer;

    if (cl.contains("ignorecase")) {

      real_answer = real_answer.toLowerCase();

    }

    if (cl.contains("nospaces")) {

      real_answer = real_answer.replace(/ /g, "");

    }

    solveme[i].dataset.answer = real_answer;



    /* attach checking function */

    solveme[i].onkeyup = solveme_func;

    solveme[i].onchange = solveme_func;



    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")

  }



  /* set up radiogroups */

  var radiogroups = document.getElementsByClassName("webex-radiogroup");

  for (var i = 0; i < radiogroups.length; i++) {

    radiogroups[i].onchange = radiogroups_func;

  }



  /* set up selects */

  var selects = document.getElementsByClassName("webex-select");

  for (var i = 0; i < selects.length; i++) {

    selects[i].onchange = select_func;

    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")

  }



  update_total_correct();

}



</script>

<script>

if (window.location.href.includes('displayall')) {

  document.body.id = 'displayall';

} else {

  document.body.id = 'progressive';

}

</script>

<script type="ojs-module-contents">
eyJjb250ZW50cyI6W119
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../..";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>